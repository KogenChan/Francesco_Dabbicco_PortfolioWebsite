import{useEffect,useState}from"react";import{useGlobalLoading}from"../context/LoadingContext";export default function useFetchData(t){const[e,a]=useState([]),[o,n]=useState(!0),[s,r]=useState(null),{startLoading:u,stopLoading:c}=useGlobalLoading();return useEffect((()=>{let e=!0;return async function(){n(!0),r(null),u();try{const o=await fetch(t);if(!o.ok)throw new Error(`Failed to fetch: ${o.status}`);const s=await o.json();e&&a(s)}catch(t){e&&r(t.message)}finally{e&&n(!1),c()}}(),()=>e=!1}),[t,u,c]),{data:e,loading:o,error:s}}