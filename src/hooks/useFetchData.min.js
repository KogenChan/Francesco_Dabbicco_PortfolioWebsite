import{useEffect,useState}from"react";import{useGlobalLoading}from"../context/LoadingContext";export default function useFetchData(t,a={}){const{manageLoading:e=!0}=a,[o,n]=useState([]),[s,r]=useState(!0),[u,i]=useState(null),{startLoading:c,stopLoading:l}=useGlobalLoading();return useEffect((()=>{let a=!0;return async function(){r(!0),i(null),e&&c();try{const o=await fetch(t);if(!o.ok)throw new Error(`Failed to fetch: ${o.status}`);const s=await o.json();a&&n(s)}catch(t){a&&i(t.message)}finally{a&&r(!1),e&&l()}}(),()=>{a=!1}}),[t,e,c,l]),{data:o,loading:s,error:u}}