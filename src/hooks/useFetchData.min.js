import{useEffect,useState}from"react";import{useGlobalLoading}from"../context/LoadingContext";export default function useFetchData(t,e={}){const{manageLoading:a=!0}=e,[o,n]=useState([]),[r,s]=useState(!0),[i,u]=useState(null),{startLoading:c,stopLoading:f}=useGlobalLoading();return useEffect((()=>{if(!t)return void s(!1);let e=!0;return async function(){s(!0),u(null),a&&c();try{const o=await fetch(t);if(!o.ok)throw new Error(`Failed to fetch: ${o.status}`);const r=await o.json();e&&n(r)}catch(t){e&&u(t.message)}finally{e&&s(!1),a&&f()}}(),()=>{e=!1}}),[t,a,c,f]),{data:o,loading:r,error:i}}